<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakura Tuition - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&family=Zen+Antique+Soft&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            overflow: hidden; /* Prevent scrollbars from falling petals */
        }
        
        .zen-font {
            font-family: 'Zen Antique Soft', serif;
        }

        /* Cherry Blossom Animation */
        .sakura-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .petal {
            position: absolute;
            background-color: #ffd7e6;
            border-radius: 150% 0 150% 0;
            animation: animate-petal 10s linear infinite;
        }

        .petal::after {
            content: "";
            position: absolute;
            top: -14%;
            left: -10%;
            width: 100%;
            height: 100%;
            border-radius: 150% 0 150% 0;
            background-color: #ffd7e6;
            transform: rotate(15deg);
        }

        @keyframes animate-petal {
            0% {
                opacity: 0;
                top: -10%;
                transform: translateX(0) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            20% {
                transform: translateX(-20px) rotate(45deg);
            }
            40% {
                transform: translateX(-20px) rotate(90deg);
            }
            60% {
                transform: translateX(20px) rotate(135deg);
            }
            80% {
                transform: translateX(-20px) rotate(180deg);
            }
            100% {
                top: 110%;
                transform: translateX(-20px) rotate(225deg);
            }
        }

        /* Glassmorphism Effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .input-group:focus-within i {
            color: #db2777; /* Tailwind pink-600 */
        }
        
        .input-group:focus-within input {
            border-color: #db2777;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-50 via-white to-pink-100 h-screen w-full flex items-center justify-center relative">

    <!-- Background Decoration -->
    <div class="absolute inset-0 z-0">
        <!-- Abstract shape 1 -->
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-pink-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
        <!-- Abstract shape 2 -->
        <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-red-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>
        <!-- Mount Fuji Graphic (CSS/SVG Simple Representation) -->
        <div class="absolute bottom-0 w-full flex justify-center opacity-20 pointer-events-none">
             <svg viewBox="0 0 1440 320" class="w-full text-pink-300 fill-current">
                 <path d="M720 128L0 320h1440L720 128z" fill="#e2e8f0"></path> <!-- Mountain Base -->
                 <path d="M720 128L580 200h280L720 128z" fill="#fff"></path> <!-- Snow Cap -->
             </svg>
        </div>
    </div>

    <!-- Falling Petals Container -->
    <div id="sakura-container" class="sakura-container"></div>

    <!-- Main Login Container -->
    <div class="z-10 w-full max-w-md px-6">
        <div class="glass-card rounded-2xl p-8 sm:p-10 transform transition-all hover:scale-[1.01] duration-500">
            
            <!-- Logo / Header -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-pink-50 mb-4 border-2 border-pink-100 shadow-sm relative overflow-hidden group">
                    <i class="fas fa-torii-gate text-3xl text-pink-500 group-hover:scale-110 transition-transform duration-300"></i>
                    <!-- Subtle petal decorative inside logo -->
                    <i class="fas fa-leaf absolute top-2 right-4 text-pink-200 text-xs transform rotate-45"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 zen-font tracking-wide">Sakura Tuition</h1>
                <p class="text-gray-500 text-sm mt-2 font-medium">Japanese Language & Culture</p>
                <div class="flex items-center justify-center gap-2 mt-1">
                     <span class="h-px w-8 bg-pink-300"></span>
                     <span class="text-pink-400 text-xs">桜</span>
                     <span class="h-px w-8 bg-pink-300"></span>
                </div>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="space-y-6">
                
                <!-- Error Message Container -->
                <div id="errorMessage" class="hidden bg-red-50 border-l-4 border-red-500 text-red-700 p-3 rounded text-sm flex items-start animate-pulse">
                    <i class="fas fa-exclamation-circle mt-0.5 mr-2"></i>
                    <div>
                        <p class="font-bold">Login Failed</p>
                        <p>Invalid credentials. Please try again.</p>
                    </div>
                </div>

                <!-- Username Input -->
                <div class="space-y-1">
                    <label for="username" class="block text-sm font-medium text-gray-700 ml-1">Username / ID</label>
                    <div class="relative input-group transition-colors duration-300">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-user text-gray-400 transition-colors duration-300"></i>
                        </div>
                        <input type="text" id="username" name="username" required 
                            class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-200 bg-white/50 text-gray-800 placeholder-gray-400 transition-all"
                            placeholder="Enter your ID">
                    </div>
                </div>

                <!-- Password Input -->
                <div class="space-y-1">
                    <label for="password" class="block text-sm font-medium text-gray-700 ml-1">Password</label>
                    <div class="relative input-group transition-colors duration-300">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-lock text-gray-400 transition-colors duration-300"></i>
                        </div>
                        <input type="password" id="password" name="password" required 
                            class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-200 bg-white/50 text-gray-800 placeholder-gray-400 transition-all"
                            placeholder="••••••••">
                         <div class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer" onclick="togglePassword()">
                            <i id="eyeIcon" class="fas fa-eye text-gray-400 hover:text-pink-500 transition-colors"></i>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" 
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-bold text-white bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transform hover:-translate-y-0.5 transition-all duration-200">
                    Login <i class="fas fa-arrow-right ml-2 mt-1"></i>
                </button>

            </form>

            <!-- New Registration / Apply Section -->
            <div class="mt-6">
                <div class="relative">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-200"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-2 bg-white/50 text-gray-500">New to Sakura?</span>
                    </div>
                </div>

                <div class="mt-4 grid grid-cols-2 gap-3">
                    <a href="studentReg.html" class="flex items-center justify-center px-4 py-2 border border-blue-200 rounded-lg text-sm font-medium text-blue-600 bg-blue-50/80 hover:bg-blue-100 transition-colors text-center group">
                        <i class="fas fa-user-graduate mr-2 group-hover:scale-110 transition-transform"></i> Register
                    </a>
                    <a href="teacherApply.html" class="flex items-center justify-center px-4 py-2 border border-emerald-200 rounded-lg text-sm font-medium text-emerald-600 bg-emerald-50/80 hover:bg-emerald-100 transition-colors text-center group">
                        <i class="fas fa-chalkboard-teacher mr-2 group-hover:scale-110 transition-transform"></i> Apply
                    </a>
                </div>
            </div>

            <!-- Footer / Help -->
            <div class="mt-6 pt-4 border-t border-gray-100 text-center">
                <p class="text-sm text-gray-500">
                    Trouble logging in? 
                    <button onclick="showContactModal()" class="font-medium text-pink-600 hover:text-pink-500 hover:underline transition-colors focus:outline-none">
                        Contact Admin
                    </button>
                </p>
                <p class="text-xs text-gray-400 mt-4">© 2026 Sakura Tuition. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Contact Admin Modal (Hidden by default) -->
    <div id="contactModal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm transition-opacity opacity-0">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm mx-4 transform scale-95 transition-transform duration-200">
            <div class="text-center mb-4">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4">
                    <i class="fas fa-headset text-blue-600 text-xl"></i>
                </div>
                <h3 class="text-lg leading-6 font-medium text-gray-900">Contact Support</h3>
                <p class="text-sm text-gray-500 mt-2">
                    Please contact the administrator directly for password resets or account issues.
                </p>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg mb-4 text-center">
                <p class="text-sm font-bold text-gray-700">Admin Line</p>
                <p class="text-lg text-blue-600 font-mono mt-1">011-234-5678</p>
            </div>
            <div class="mt-5 sm:mt-6">
                <button type="button" onclick="hideContactModal()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gray-600 text-base font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:text-sm">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // 1. Sakura Petals Animation Logic
        function createPetal() {
            const container = document.getElementById('sakura-container');
            const petal = document.createElement('div');
            petal.classList.add('petal');
            
            // Randomize starting position and animation properties
            const startLeft = Math.random() * 100;
            const animationDuration = Math.random() * 5 + 8; // Between 8 and 13 seconds
            const size = Math.random() * 10 + 10; // Between 10px and 20px
            
            petal.style.left = startLeft + '%';
            petal.style.width = size + 'px';
            petal.style.height = size + 'px';
            petal.style.animationDuration = animationDuration + 's';
            petal.style.opacity = Math.random() * 0.5 + 0.3;
            
            container.appendChild(petal);
            
            // Remove petal after animation to keep DOM clean
            setTimeout(() => {
                petal.remove();
            }, animationDuration * 1000);
        }

        // Create initial batch of petals
        for(let i = 0; i < 15; i++) {
            setTimeout(createPetal, Math.random() * 5000);
        }

        // Continue creating petals
        setInterval(createPetal, 800);


        // 2. Toggle Password Visibility
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        }

        // 3. Login Validation Logic
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorDiv = document.getElementById('errorMessage');
            
            // Define valid credentials
            // Note: In a real production app, never store passwords in plain text JS!
            const credentials = {
                'AvishkaSanduni': { pass: 'AS@2026', redirect: 'teacherdash.html', role: 'Teacher' },
                'VismalKethmika': { pass: 'VK@2026', redirect: 'studentdash.html', role: 'Student' },
                'OnnaBaboBilla':  { pass: 'OBB@2026', redirect: 'admindash.html', role: 'Admin' }
            };

            const user = credentials[username];

            if (user && user.pass === password) {
                // Success
                errorDiv.classList.add('hidden');
                
                // Show success feedback (Optional UX improvement)
                const btn = this.querySelector('button[type="submit"]');
                const originalText = btn.innerHTML;
                btn.innerHTML = `<i class="fas fa-circle-notch fa-spin"></i> Welcome, ${user.role}...`;
                btn.classList.remove('from-pink-500', 'to-rose-500');
                btn.classList.add('from-green-500', 'to-emerald-500');
                
                // Set current user for other pages to access (Simulate session)
                localStorage.setItem('sakura_current_user', username);

                // Simulate redirect delay
                setTimeout(() => {
                    alert(`Login Successful!\nRole: ${user.role}\nRedirecting to: ${user.redirect}`);
                    // Redirect is now UNCOMMENTED
                    window.location.href = user.redirect; 
                }, 800);
                
            } else {
                // Failure
                errorDiv.classList.remove('hidden');
                // Shake animation for the card
                const card = document.querySelector('.glass-card');
                card.classList.add('animate-pulse');
                setTimeout(() => card.classList.remove('animate-pulse'), 500);
            }
        });


        // 4. Modal Logic
        function showContactModal() {
            const modal = document.getElementById('contactModal');
            modal.classList.remove('hidden');
            // Small timeout to allow display:block to apply before opacity transition
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('div').classList.remove('scale-95');
                modal.querySelector('div').classList.add('scale-100');
            }, 10);
        }

        function hideContactModal() {
            const modal = document.getElementById('contactModal');
            modal.classList.add('opacity-0');
            modal.querySelector('div').classList.remove('scale-100');
            modal.querySelector('div').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        }
        
        // Close modal when clicking outside
        document.getElementById('contactModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideContactModal();
            }
        });

    </script>
</body>
</html>